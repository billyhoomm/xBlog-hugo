---
title: Shell脚本笔记整理(五) sed命令
subtitle: 
date: 2019-03-19
tags: ["运维", "shell"]
draft: true
---

本节记录流编辑器sed的用法，流编辑器即对标准输出或文件进行<b>逐行</b>处理。

<!--more-->

## 语法格式

1. 从输出流中读入

```shell
# option: 工具选项
# pattern: 匹配参数
# command: 编辑命令
stdout | sed [option] "pattern command"
```

2. 从文件流中读入

```shell
sed [option] "pattern command" file
```

## 选项参数

1. -n，只打印模式匹配行。
2. -e，直接在命令行进行sed编辑，默认选项。
3. -f，编辑动作保存在文件中，指定文件执行。当编辑命令较多时，很好用。
4. -r，支持扩展正则表达式。
5. -i，直接修改文件内容。

## 匹配参数用法表

|匹配模式|含义|
|----------|-------------|
|10command|匹配到第10行|
|10,20command|匹配从第10行开始，到第20行结束|
|10,+5command|从第10行开始，到第16行结束|
|pattern1/command|匹配到pattern1的行|
|/pattern1/,/pattern2/command|匹配到pattern1的行开始，到匹配到pattern2的行结束|
|10,/pattern1/command|匹配从第10行开始，到匹配到pettern1的行结束|
|/pattern1/,10command|匹配到pattern1的行开始，到第10行匹配结束|

## 编辑命令选项对照表

<table>
    <tr>
        <td>类别</td>
        <td>编辑命令</td>
        <td>含义</td>
    </tr>
    <tr>
        <td rowspan="4">增加</td>
        <td>a</td>
        <td>行后追加</td>
    </tr>
    <tr>
        <td>i</td>
        <td>行前追加</td>
    </tr>
    <tr>
        <td>r</td>
        <td>外部文件读入，行后追加</td>
    </tr>
    <tr>
        <td>w</td>
        <td>匹配行写入外部文件</td>
    </tr>
</table>